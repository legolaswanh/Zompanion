# 音乐音效系统使用说明

## 概述

音乐音效系统支持：
- 每个场景配置不同的背景音乐（BGM）
- 场景切换时自动淡入淡出切换音乐
- 全局音效播放（SFX）
- 音量分级控制（总音量、音乐、音效）

## 自动初始化

`GameManager` 在 `Awake` 时会自动创建 `AudioManager`（若不存在），无需手动配置。

## 场景音乐配置

1. 在场景中创建空物体（或使用已有物体如 LevelSceneManager）
2. 添加 **SceneMusicConfig** 组件
3. 配置：
   - **Music Clip**：本场景的 BGM（从 Assets/Audio/Music 拖入）
   - **Loop**：是否循环（默认勾选）
   - **Volume**：音量倍率（0~1）
   - **Fade In Time**：淡入时长（秒）
   - **Stop Music On Load**：若本场景无 BGM 时是否停止当前音乐

场景加载后，`AudioManager` 会自动查找场景中的 `SceneMusicConfig` 并播放对应音乐。

## 代码调用

### 播放音效

```csharp
// 2D 音效
AudioManager.Instance.PlaySFX(clip, volumeScale: 1f);

// 3D 音效（指定世界坐标）
AudioManager.Instance.PlaySFXAt(clip, position, volumeScale: 1f);
```

### 手动切换音乐

```csharp
// 播放指定音乐（带淡入）
AudioManager.Instance.PlayMusic(clip, fadeInTime: 1f, loop: true, volumeScale: 1f);

// 停止音乐（带淡出）
AudioManager.Instance.StopMusic(fadeOutTime: 0.5f);
```

### 音量控制

```csharp
AudioManager.Instance.SetMasterVolume(1f);
AudioManager.Instance.SetMusicVolume(0.8f);
AudioManager.Instance.SetSFXVolume(1f);
```

## 推荐结构

- **Assets/Audio/Music**：存放各场景 BGM
- **Assets/Audio/Sound**：存放音效
- 每个关卡场景的 LevelSceneManager 同物体上添加 SceneMusicConfig，配置该关卡的 BGM
